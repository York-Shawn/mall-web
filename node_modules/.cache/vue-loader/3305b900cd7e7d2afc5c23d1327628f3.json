{"remainingRequest":"D:\\go-workspace\\mall\\web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js??ref--1-1!D:\\go-workspace\\mall\\web\\src\\view\\Order.vue?vue&type=style&index=0&id=40939c46&scoped=true&lang=css","dependencies":[{"path":"D:\\go-workspace\\mall\\web\\src\\view\\Order.vue","mtime":1677664148724},{"path":"D:\\go-workspace\\mall\\web\\node_modules\\css-loader\\dist\\cjs.js","mtime":1678869285258},{"path":"D:\\go-workspace\\mall\\web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\stylePostLoader.js","mtime":1678869302587},{"path":"D:\\go-workspace\\mall\\web\\node_modules\\postcss-loader\\src\\index.js","mtime":1678869286413},{"path":"D:\\go-workspace\\mall\\web\\node_modules\\cache-loader\\dist\\cjs.js","mtime":1678869284518},{"path":"D:\\go-workspace\\mall\\web\\node_modules\\@vue\\cli-service\\node_modules\\vue-loader-v16\\dist\\index.js","mtime":1678869302535}],"contextDependencies":[],"result":[{"type":"Buffer","data":"base64:DQouZ29vZHNfaW1hZ2V7DQogIHdpZHRoOiAzNXB4Ow0KICBoZWlnaHQ6IDM1cHg7DQogIGJvcmRlci1yYWRpdXM6IDVweDsNCn0NCi5lbC1kaWFsb2cgew0KICBib3JkZXItcmFkaXVzOiAxMHB4ICFpbXBvcnRhbnQ7DQp9DQoNCi5lbC10YWJsZV9faGVhZGVyIHRyLCAuZWwtdGFibGVfX2hlYWRlciB0aCB7DQogIGJhY2tncm91bmQtY29sb3I6ICNlZmY2ZmYgIWltcG9ydGFudDsNCiAgZm9udC13ZWlnaHQ6IDQ1MCAhaW1wb3J0YW50Ow0KICBjb2xvcjogIzYyN2E5NCAhaW1wb3J0YW50Ow0KICBib3JkZXItYm90dG9tOiBub25lICFpbXBvcnRhbnQ7DQp9DQo="},{"version":3,"sources":["D:\\go-workspace\\mall\\web\\src\\view\\Order.vue"],"names":[],"mappings":";AAsRA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACV,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACX,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC;EACZ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC;AACpB;AACA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE;EACT,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChC;;AAEA,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE;EACzC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACpC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EAC3B,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;EACzB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;AAChC","file":"D:/go-workspace/mall/web/src/view/Order.vue","sourceRoot":"","sourcesContent":["<template>\r\n  <container>\r\n    <!-- 订单查询 -->\r\n    <el-form :inline=\"true\" :model=\"query\" ref=\"query\" class=\"goods_query_form\">\r\n      <el-form-item prop=\"id\">\r\n        <el-input v-model.number=\"query.id\" placeholder=\"订单ID\"/>\r\n      </el-form-item>\r\n      <el-form-item prop=\"status\">\r\n        <el-select v-model=\"query.status\" placeholder=\"订单状态\">\r\n          <el-option label=\"待付款\" value=\"1\"></el-option>\r\n          <el-option label=\"已取消\" value=\"2\"></el-option>\r\n          <el-option label=\"已付款\" value=\"3\"></el-option>\r\n          <el-option label=\"配送中\" value=\"4\"></el-option>\r\n          <el-option label=\"已完成\" value=\"5\"></el-option>\r\n        </el-select>\r\n      </el-form-item>\r\n      <el-form-item>\r\n        <el-button type=\"primary\" :icon=\"Search\" @click=\"getOrderList\">查询</el-button>\r\n        <el-button type=\"primary\" :icon=\"Brush\" @click=\"resetForm\"/>\r\n      </el-form-item>\r\n    </el-form>\r\n    <!-- 订单列表 -->\r\n    <el-table :data=\"orderList\" height=\"65vh\" style=\"width: 100%\">\r\n      <el-table-column prop=\"id\" label=\"订单号\" width=\"200px\"/>\r\n      <el-table-column prop=\"totalPrice\" label=\"订单金额\"/>\r\n      <el-table-column prop=\"goodsCount\" label=\"商品数量\">\r\n        <template #default=\"scope\">x{{scope.row.goodsCount}}</template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"status\" label=\"订单状态\">\r\n        <template #default=\"scope\">\r\n          <el-tag v-if=\"scope.row.status === 1\" size=\"small\" type=\"info\">待付款</el-tag>\r\n          <el-tag v-if=\"scope.row.status === 2\" size=\"small\" type=\"info\">已取消</el-tag>\r\n          <el-tag v-if=\"scope.row.status === 3\" size=\"small\" type=\"info\">已付款</el-tag>\r\n          <el-tag v-if=\"scope.row.status === 4\" size=\"small\" type=\"primary\">配送中</el-tag>\r\n          <el-tag v-if=\"scope.row.status === 5\" size=\"small\" type=\"success\">已完成</el-tag>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column prop=\"created\" label=\"创建时间\" min-width=\"150\" sortable>\r\n        <template #default=\"scope\">\r\n          <div style=\"display: flex; align-items: center\">\r\n            <el-icon><timer/></el-icon>\r\n            <span style=\"margin-left: 10px\">{{ scope.row.created }}</span>\r\n          </div>\r\n        </template>\r\n      </el-table-column>\r\n      <el-table-column label=\"操作\" min-width=\"130\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" @click=\"checkOrder(scope.$index, scope.row)\">详情</el-button>\r\n          <el-button v-if=\"scope.row.status === 3\" size=\"small\" type=\"primary\" @click=\"modifyOrder(scope.row, 4)\">配送</el-button>\r\n          <el-popconfirm title=\"此操作将永久删除该信息, 是否继续?\"\r\n                         confirmButtonText=\"确认\"\r\n                         cancelButtonText=\"取消\"\r\n                         cancelButtonType=\"default\"\r\n                         v-if=\"scope.row.status === 2 || scope.row.status === 5\"\r\n                         :icon=\"WarningFilled\"\r\n                         @confirm=\"deleteOrder(scope.row)\">\r\n            <template #reference>\r\n             <el-button size=\"small\" type=\"danger\">删除</el-button>\r\n            </template>\r\n          </el-popconfirm>\r\n        </template>\r\n      </el-table-column>\r\n      <template #empty>\r\n        <div style=\"margin: 50px 0;\">\r\n          <el-empty  v-if=\"showEmpty\" description=\"暂时还没有订单哦\" />\r\n        </div>\r\n      </template>\r\n    </el-table>\r\n    <div style=\"padding: 10px 0;\">\r\n      <el-pagination layout=\"total, prev, pager, next\"\r\n                   :current-page=\"pageNum\"\r\n                   :page-size=\"pageSize\"\r\n                   :total=\"total\"\r\n                   @current-change=\"handleCurrentChange\"\r\n                   @prev-click=\"handleCurrentChangePrev\"\r\n                   @next-click=\"handleCurrentChangeNext\" background/>\r\n    </div>\r\n    <!-- 查看订单详情，对话框 -->\r\n    <el-dialog :title=\"dialogTitle\" v-model=\"orderDialogVisible\" top=\"5vh\" width=\"50%\">\r\n      <descriptions label=\"订单编号\">{{orderDetail.id}}</descriptions>\r\n      <descriptions label=\"订单状态\">\r\n        <el-tag v-if=\"orderDetail.status === 1\" size=\"small\" type=\"warning\">待付款</el-tag>\r\n        <el-tag v-if=\"orderDetail.status === 2\" size=\"small\" type=\"info\">已取消</el-tag>\r\n        <el-tag v-if=\"orderDetail.status === 3\" size=\"small\" type=\"success\">已付款</el-tag>\r\n        <el-tag v-if=\"orderDetail.status === 4\" size=\"small\" type=\"primary\">配送中</el-tag>\r\n        <el-tag v-if=\"orderDetail.status === 5\" size=\"small\" type=\"success\">已完成</el-tag>\r\n      </descriptions>\r\n      <descriptions label=\"支付金额\">{{orderDetail.totalPrice}}</descriptions>\r\n      <descriptions label=\"商品列表\">\r\n        <el-table :data=\"orderDetail.goodsItem\" style=\"width: 100%\">\r\n          <el-table-column prop=\"name\" label=\"主图\" width=\"60\">\r\n            <template #default=\"scope\">\r\n              <div style=\"display: flex;justify-content: center;align-items: center;\">\r\n                <el-image class=\"goods_image\" :src=\"scope.row.imageUrl\"/>\r\n              </div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"title\" label=\"标题\">\r\n            <template #default=\"scope\">\r\n              <div style=\"font-size: 10px;line-height: 15px;\">{{scope.row.title}}</div>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column prop=\"count\" label=\"数量\" width=\"80\">\r\n            <template #default=\"scope\">x {{scope.row.count}}</template>\r\n          </el-table-column>\r\n        </el-table>\r\n      </descriptions>\r\n      <descriptions label=\"收货人姓名\">{{orderDetail.name}}</descriptions>\r\n      <descriptions label=\"手机号\">{{orderDetail.mobile}}</descriptions>\r\n      <descriptions label=\"收货地址\">{{orderDetail.province + ' ' + orderDetail.city + ' ' + orderDetail.district +\r\n      ' ' + orderDetail.detailedAddress }}</descriptions>\r\n      <descriptions label=\"创建时间\">{{orderDetail.created}}</descriptions>\r\n      <template #footer>\r\n        <span class=\"dialog-footer\">\r\n          <el-button type=\"primary\" @click=\"orderDialogVisible = false\">确定</el-button>\r\n        </span>\r\n      </template>\r\n    </el-dialog>\r\n  </container>\r\n</template>\r\n\r\n<script>\r\nimport container from \"../components/container\";\r\nimport {Brush, Delete, Search, Setting, Timer, WarningFilled} from \"@element-plus/icons-vue\";\r\nimport {ElMessage} from \"element-plus\";\r\nimport descriptions from \"@/components/descriptions\";\r\n\r\nexport default {\r\n  name: \"Order\",\r\n  components: {descriptions, container, Timer},\r\n  setup() {\r\n    return {Search, Brush, Setting, Delete, WarningFilled}\r\n  },\r\n  data() {\r\n    return {\r\n      orderList: [],\r\n      order: {\r\n        id: '',\r\n        amount: '',\r\n        goodsCount: '',\r\n        status: '',\r\n        shippingAddress: ''\r\n      },\r\n      query: {\r\n        id: '',\r\n        status: ''\r\n      },\r\n      orderDetail: {\r\n        id: '',\r\n        status: '',\r\n        totalPrice: '',\r\n        goodsItem: [],\r\n        name: '',\r\n        mobile: '',\r\n        province: '',\r\n        city: '',\r\n        district: '',\r\n        detailedAddress: '',\r\n        created: '',\r\n        nickName: ''\r\n      },\r\n      dialogTitle: '',\r\n      operateType: '',\r\n      orderDialogVisible: false,\r\n\r\n      // 分页\r\n      total: 0,\r\n      pageNum: 1,\r\n      pageSize: 12,\r\n\r\n      // 空状态\r\n      showEmpty: false\r\n    }\r\n  },\r\n  mounted() {\r\n    this.getOrderList()\r\n  },\r\n  methods: {\r\n    // 分页，处理函数\r\n    handleCurrentChangePrev(val) {\r\n      this.pageNum = val;\r\n      console.log(`上一页: ${val}`);\r\n    },\r\n    handleCurrentChange(val) {\r\n      this.pageNum = val;\r\n      this.getOrderList();\r\n      console.log(`当前页: ${val}`);\r\n    },\r\n    handleCurrentChangeNext(val) {\r\n      this.pageNum = val;\r\n      console.log(`下一页: ${val}`);\r\n    },\r\n\r\n    // 获取订单列表\r\n    getOrderList(){\r\n      this.$axios.get('/order/list', {\r\n        params: {\r\n          id: this.query.id,\r\n          status: this.query.status,\r\n          pageNum: this.pageNum,\r\n          pageSize: this.pageSize,\r\n          sid: parseInt(localStorage.getItem('sid'))\r\n        }\r\n      }).then((response) => {\r\n        this.total = response.data.data.total\r\n        this.orderList = response.data.data.list\r\n        if (this.orderList.length === 0) {\r\n          this.showEmpty = true\r\n        }\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n    },\r\n\r\n    // 查看订单详情\r\n    checkOrder(index, row) {\r\n      this.orderDetail.nickName = row.nickName\r\n      console.log(row.id)\r\n      this.dialogTitle = '订单详情'\r\n      this.$axios.get('/order/detail', {\r\n        params: { id: row.id }\r\n      }).then((response) => {\r\n        this.orderDetail.id = response.data.data.id\r\n        this.orderDetail.status = response.data.data.status\r\n        this.orderDetail.totalPrice = response.data.data.totalPrice\r\n        this.orderDetail.goodsItem = response.data.data.goodsItem\r\n        this.orderDetail.name = response.data.data.name\r\n        this.orderDetail.mobile = response.data.data.mobile\r\n        this.orderDetail.province = response.data.data.province\r\n        this.orderDetail.city = response.data.data.city\r\n        this.orderDetail.district = response.data.data.district\r\n        this.orderDetail.detailedAddress = response.data.data.detailedAddress\r\n        this.orderDetail.created = response.data.data.created\r\n      }).catch((error) => {\r\n        console.log(error)\r\n      })\r\n      this.orderDialogVisible = true\r\n    },\r\n\r\n    // 修改订单\r\n    modifyOrder(row, status) {\r\n      this.$axios.put('/order/update', {\r\n        id: row.id,\r\n        status: status\r\n      }).then((response) => {\r\n        if (response.data.code === 200 && status === 4){\r\n          ElMessage({message: '订单配送中', type: 'success'})\r\n        }\r\n        this.getOrderList()\r\n      })\r\n    },\r\n\r\n    // 重置查询表单\r\n    resetForm() {\r\n      this.$refs['query'].resetFields()\r\n      this.getOrderList()\r\n    },\r\n\r\n    // 删除订单\r\n    deleteOrder(row){\r\n      this.$axios.delete('/order/delete', {\r\n          params: {\r\n            id: row.id\r\n          }\r\n        }).then((response) => {\r\n          if (response.data.code === 200) {\r\n            ElMessage({message: response.data.message, type: 'success'})\r\n          }\r\n          this.getOrderList()\r\n        }).catch((error) => {\r\n          console.log(error)\r\n      })\r\n    }\r\n  }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n.goods_image{\r\n  width: 35px;\r\n  height: 35px;\r\n  border-radius: 5px;\r\n}\r\n.el-dialog {\r\n  border-radius: 10px !important;\r\n}\r\n\r\n.el-table__header tr, .el-table__header th {\r\n  background-color: #eff6ff !important;\r\n  font-weight: 450 !important;\r\n  color: #627a94 !important;\r\n  border-bottom: none !important;\r\n}\r\n</style>"]}]}